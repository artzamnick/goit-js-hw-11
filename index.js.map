{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '53386228-9ccf01ca4b721fbc8928b7547';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function getImagesByQuery(query, page = 1, per_page = 40) {\nreturn axios\n    .get(BASE_URL, {\n    params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page,\n    },\n    })\n    .then(r => r.data);\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst GALLERY_SELECTOR = '.gallery';\nconst LOADER_SELECTOR = '.loader';\n\nconst galleryRef = document.querySelector(GALLERY_SELECTOR);\nconst loaderRef = document.querySelector(LOADER_SELECTOR);\nconst lightbox = new SimpleLightbox(`${GALLERY_SELECTOR} a`, {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    if (!galleryRef) return;\nconst markup = images\n    .map(img => {\n    return `\n    <li class=\"gallery__item\">\n        <a class=\"gallery__link\" href=\"${img.largeImageURL}\">\n        <div class=\"photo-card\">\n            <img class=\"photo-card__img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b><br>${img.likes}</p>\n                <p class=\"info-item\"><b>Views</b><br>${img.views}</p>\n                <p class=\"info-item\"><b>Comments</b><br>${img.comments}</p>\n                <p class=\"info-item\"><b>Downloads</b><br>${img.downloads}</p>\n            </div>\n            </div>\n        </a>\n        </li>\n        `;\n    })\n    .join('');\n    galleryRef.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    if (!galleryRef) return;\n    galleryRef.innerHTML = '';\n    lightbox.refresh();\n}\n\nexport function showLoader() {\n    if (!loaderRef) return;\n    loaderRef.classList.add('is-active');\n}\n\nexport function hideLoader() {\n    if (!loaderRef) return;\n    loaderRef.classList.remove('is-active');\n}\n","import { getImagesByQuery } from './js/pixabay-api.js'; \nimport { createGallery, clearGallery } from './js/render-functions.js'; \nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.form-input');\nconst loader = document.querySelector('.loader');\nconst galleryRef = document.querySelector('.gallery');\n\nif (!form || !input || !loader || !galleryRef) {\nconsole.error('Required DOM elements not found:', {\n    form: !!form,\n    input: !!input,\n    loader: !!loader,\n    gallery: !!galleryRef,\n});\n}\n\nfunction showLoader() {\nloader.classList.remove('is-hidden');\n}\nfunction hideLoader() {\nloader.classList.add('is-hidden');\n}\n\nfunction renderGalleryFallback(images) {\nconst markup = images\n    .map(img => {\n    return `\n<li class=\"gallery__item\">\n<a href=\"${img.largeImageURL}\">\n    <img class=\"photo-card__img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n</a>\n<div class=\"info\">\n    <p><b>Likes</b><br>${img.likes}</p>\n    <p><b>Views</b><br>${img.views}</p>\n    <p><b>Comments</b><br>${img.comments}</p>\n    <p><b>Downloads</b><br>${img.downloads}</p>\n</div>\n</li>`;\n    })\n    .join('');\n    galleryRef.insertAdjacentHTML('beforeend', markup);\n\ntry {\n    if (window.SimpleLightboxInstance) {\n        window.SimpleLightboxInstance.refresh();\n    } else {\n        window.SimpleLightboxInstance = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    }\n} catch (err) {\n    console.warn('SimpleLightbox init warning:', err);\n}\n}\n\nform.addEventListener('submit', onSearchSubmit);\nfunction onSearchSubmit(evt) {\nevt.preventDefault();\nconst query = input.value.trim();\n\nif (!query) {\n    iziToast.warning({\n        title: 'Увага',\n        message: 'Введіть слово для пошуку.',\n        position: 'topRight',\n        timeout: 3000,\n    });\n    return;\n    }\n\ngalleryRef.innerHTML = '';\nshowLoader();\ngetImagesByQuery(query)\n    .then(data => {\n    if (!data || !Array.isArray(data.hits)) {\n        throw new Error('Неправильна відповідь від API');\n    }\n        if (data.hits.length === 0) {\n        iziToast.info({\n            title: 'Нічого не знайдено',\n            message: 'Спробуйте інше ключове слово.',\n            position: 'topRight',\n            timeout: 4000,\n        });\n        return;\n    }\n\n    if (typeof createGallery === 'function') {\n        createGallery(data.hits);\n    } else {\n        renderGalleryFallback(data.hits);\n    }\n\n    iziToast.success({\n        title: 'Знайдено',\n        message: `Знайдено ${data.hits.length} зображень для \"${query}\"`,\n        position: 'topRight',\n        timeout: 2500,\n    });\n    })\n    .catch(err => {\n    console.error('Fetch/images error:', err);\n    iziToast.error({\n        title: 'Помилка',\n        message:\n        'Не вдалося отримати зображення. Перевірте інтернет або ключ API й спробуйте ще раз.',\n        position: 'topRight',\n        timeout: 5000,\n    });\n    })\n    .finally(() => {\n    hideLoader();\n    });\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","per_page","axios","r","GALLERY_SELECTOR","LOADER_SELECTOR","galleryRef","lightbox","SimpleLightbox","createGallery","images","markup","img","form","input","loader","showLoader","hideLoader","renderGalleryFallback","err","onSearchSubmit","evt","iziToast","data"],"mappings":"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"}